(function(){var h="//res.wx.qq.com/open/js/jweixin-1.0.0.js",c="//open.mobile.qq.com/sdk/qqapi.js?_bid=152",g="//qzonestyle.gtimg.cn/qzone/phone/m/v4/widget/mobile/jsbridge.js?_bid=339";var d;function a(j,n){var m=document;var k=m.head||(m.getElementsByTagName("head")[0]||m.documentElement);var l=m.createElement("script");l.onload=n;l.onerror=function(){};l.async=true;l.src=j[0];k.appendChild(l)}function e(j){if(!j.WXconfig){return}d([h],function(l){if(!l.config){l=window.wx}var k=j.WXconfig;l.config({debug:false,appId:k.appId,timestamp:k.timestamp,nonceStr:k.nonceStr,signature:k.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareQZone"]});l.error(function(m){});l.ready(function(){var m={title:j.title,desc:j.summary,link:j.url,imgUrl:j.pic,type:"",dataUrl:"",success:function(){},cancel:function(){}};l.onMenuShareAppMessage(m);l.onMenuShareQQ(m);l.onMenuShareQZone(m);if(k.swapTitleInWX){l.onMenuShareTimeline({title:j.summary,desc:j.title,link:j.url,imgUrl:j.pic,type:"",dataUrl:"",success:function(){},cancel:function(){}})}else{l.onMenuShareTimeline(m)}})})}function b(j){var k={title:j.title,desc:j.summary,share_url:j.url,image_url:j.pic};d([c],function(){try{if(j.callback){window.mqq.ui.setOnShareHandler(function(m){if(m==3&&(j.swapTitle||j.WXconfig&&j.WXconfig.swapTitleInWX)){k.title=j.summary}else{k.title=j.title}window.mqq.ui.shareMessage($.extend(k,{share_type:m,back:true}),function(n){if(n.retCode===0){j.callback&&j.callback.call(this,n)}})})}else{window.mqq.data.setShareInfo(k)}}catch(l){}})}function f(j){d([g],function(){if(QZAppExternal&&QZAppExternal.setShare){var k=[],o=[],n=[],m=[];for(var l=0;l<5;l++){k.push(j.pic);m.push(j.url);if(l===4&&(j.swapTitle||j.WXconfig&&j.WXconfig.swapTitleInWX)){o.push(j.summary);n.push(j.title)}else{o.push(j.title);n.push(j.summary)}}QZAppExternal.setShare(function(p){},{type:"share",image:k,title:o,summary:n,shareURL:m})}})}function i(m){var l=navigator.userAgent;var k=l.match(/MicroMessenger\/([\d\.]+)/),n=l.match(/QQ\/([\d\.]+)/),j=l.indexOf("Qzone/")!==-1;k&&e(m);n&&b(m);j&&f(m)}if(typeof define==="function"&&(define.cmd||define.amd)){if(define.cmd){d=seajs.use}else{if(define.amd){d=window.require}}define(function(){return i})}else{d=a;window.setShareInfo=i}})();